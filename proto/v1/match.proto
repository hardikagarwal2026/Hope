syntax = "proto3";

package proto.v1;

option go_package = "./proto/v1/match";

import "google/protobuf/timestamp.proto";

message Match {
  string id = 1;
  string rider_id = 2;
  string driver_id = 3;
  string ride_id = 4;
  string status = 5;
  google.protobuf.Timestamp created_at = 6;
}

service MatchService {
  rpc RequestToJoin      (RequestToJoinRequest)      returns (RequestToJoinResponse);
  rpc AcceptRequest      (AcceptRequestRequest)      returns (AcceptRequestResponse);
  rpc RejectRequest      (RejectRequestRequest)      returns (RejectRequestResponse);
  rpc CompleteMatch      (CompleteMatchRequest)      returns (CompleteMatchResponse);
  rpc GetMatch           (GetMatchRequest)           returns (GetMatchResponse);
  rpc ListMatchesByRide  (ListMatchesByRideRequest)  returns (ListMatchesByRideResponse);
  rpc ListMatchesByRider (ListMatchesByRiderRequest) returns (ListMatchesByRiderResponse);
  rpc ListMyMatches      (ListMyMatchesRequest)      returns (ListMyMatchesResponse);
}

message RequestToJoinRequest {
  string ride_id = 1;
}
message RequestToJoinResponse {
  Match match = 1;
}

message AcceptRequestRequest {
  string match_id = 1;
}
message AcceptRequestResponse {
  Match match = 1;
}

message RejectRequestRequest {
  string match_id = 1;
}
message RejectRequestResponse {
  Match match = 1;
}

message CompleteMatchRequest {
  string match_id = 1;
}
message CompleteMatchResponse {
  Match match = 1;
}

message GetMatchRequest {
  string match_id = 1;
}
message GetMatchResponse {
  Match match = 1;
}

message ListMatchesByRideRequest {
  string ride_id = 1;
}
message ListMatchesByRideResponse {
  repeated Match matches = 1;
}

message ListMatchesByRiderRequest {
  string rider_id = 1;
}
message ListMatchesByRiderResponse {
  repeated Match matches = 1;
}

message ListMyMatchesRequest {}
message ListMyMatchesResponse {
  repeated Match matches = 1;
}
